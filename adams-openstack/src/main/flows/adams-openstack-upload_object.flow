# Project: adams
# Date: 2016-05-10 21:27:02
# User: fracpete
# Charset: UTF-8
adams.flow.control.Flow -annotation "Uploads an object to one or more regions." -flow-execution-listener adams.flow.execution.NullListener
 adams.flow.standalone.CallableActors
  adams.flow.sink.Display -writer adams.data.io.output.NullWriter
 adams.flow.standalone.JCloudsConnection -name "JCloudsConnection - nova" -provider openstack-nova
 adams.flow.standalone.JCloudsConnection -name "JCloudsConnection - swift" -provider openstack-swift
 adams.flow.source.Start
 adams.flow.control.Trigger -name "select upload region(s)"
  adams.flow.source.JCloudsSource -action adams.flow.source.jclouds.OpenStackListRegions
  adams.flow.transformer.SelectArraySubset -message "Please select the region to upload to"
  adams.flow.transformer.SetStorageValue -storage-name regions
 adams.flow.control.Trigger -name "selecting file to upload"
  adams.flow.source.SelectFile -stop-if-canceled true -file-chooser-title "Select file to upload"
  adams.flow.control.Tee -name filename
   adams.flow.transformer.BaseName -remove-extensions true
   adams.flow.transformer.SetVariable -var-name name
  adams.flow.transformer.BinaryFileReader -output-array true
  adams.flow.transformer.SetStorageValue -storage-name object
 adams.flow.control.Trigger -name "iterate regions"
  adams.flow.source.StorageValue -storage-name regions
  adams.flow.control.Breakpoint -condition adams.flow.condition.bool.Expression
  adams.flow.transformer.ArrayToSequence
  adams.flow.transformer.SetVariable -var-name region
  adams.flow.control.Tee -name "output region"
   adams.flow.transformer.StringInsert -position first -value "--> "
   adams.flow.sink.CallableSink -callable Display
  adams.flow.control.Trigger -name "upload to region"
   adams.flow.source.StorageValue -storage-name object
   adams.flow.transformer.JCloudsTransformer -action "adams.flow.transformer.jclouds.OpenStackUploadContainer -region @{region} -name @{name} -format SERIALIZED_OBJECT -to-string adams.data.conversion.StringToString -from-string adams.data.conversion.StringToString"
   adams.flow.sink.CallableSink -callable Display
