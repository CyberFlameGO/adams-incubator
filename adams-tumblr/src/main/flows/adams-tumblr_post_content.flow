# Project: adams
# Date: 2014-01-23 15:43:51
# User: fracpete
# Charset: UTF-8
#
adams.flow.control.Flow
	-annotation
	Displays raw HTML content of posts from the \"staff\" blog.
	-actor
		adams.flow.standalone.CallableActors
			-actor
				adams.flow.sink.Display
					-name
					Info
					-short-title
					true
			-actor
				adams.flow.sink.SpreadSheetDisplay
					-name
					Posts
					-short-title
					true
					-x
					-3
	-actor
		adams.flow.standalone.TumblrConnection
	-actor
		adams.flow.source.Start
	-actor
		adams.flow.control.Trigger
			-name
			get posts
			-tee
				adams.flow.source.TumblrBlogPosts
					-blog
					staff
			-tee
				adams.flow.control.Tee
					-name
					download post
					-tee
						adams.flow.transformer.TumblrPostConverter
							-converter
								adams.data.tumblr.TextConverter
									-separator
									\t
									-quote
									true
					-tee
						adams.flow.control.Tee
							-name
							info
							-tee
								adams.flow.sink.CallableSink
									-callable
									Info
					-tee
						adams.flow.transformer.DownloadContent
					-tee
						adams.flow.control.SubProcess
							-name
							strip outer HTML around "section" tag
							-actor
								adams.flow.transformer.StringSplit
									-expression
									<section id=\"content\">
							-actor
								adams.flow.transformer.GetArrayElement
									-index
									2
							-actor
								adams.flow.transformer.StringSplit
									-name
									StringSplit-1
									-expression
									</section>
							-actor
								adams.flow.transformer.GetArrayElement
									-name
									GetArrayElement-1
					-tee
						adams.flow.transformer.SetVariable
							-var-name
							post
			-tee
				adams.flow.transformer.TumblrPostConverter
					-converter
						adams.data.tumblr.SpreadSheetConverter
							-field
							BLOG_NAME
							-field
							TIMESTAMP
							-field
							DATE
							-field
							TYPE
							-field
							FORMAT
							-field
							POST_URL
							-spreadsheet-type
								adams.data.spreadsheet.SpreadSheet
			-tee
				adams.flow.transformer.SpreadSheetInsertColumn
					-no-copy
					true
					-after
					true
					-header
					POST
			-tee
				adams.flow.transformer.SpreadSheetSetCell
					-no-copy
					true
					-row
					last
					-col
					POST
					-value
					@{post}
					-force-string
					true
			-tee
				adams.flow.transformer.SpreadSheetAppend
					-storage-name
					sheet
	-actor
		adams.flow.control.Trigger
			-name
			display posts
			-tee
				adams.flow.source.StorageValue
					-storage-name
					sheet
			-tee
				adams.flow.sink.CallableSink
					-callable
					Posts
	-flow-execution-listener
		adams.flow.execution.NullListener

